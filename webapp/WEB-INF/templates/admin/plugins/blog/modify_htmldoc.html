<script src="js/plugins/blog/manage_tag.js"></script>
<@rowBoxHeader i18nTitleKey="blog.modify_htmldoc.title">
  <div class="box-tools pull-right">
	
 	<#if extendableResourceActionsHtml?? && extendableResourceActionsHtml?has_content>
		<div class="btn-group">
			${extendableResourceActionsHtml!}
		</div>
	</#if>

 </div>
  <form class="form-horizontal" method="post" name="modify_htmldoc" enctype="multipart/form-data" action="jsp/admin/plugins/blog/ManageHtmlDocs.jsp">
    <@messages errors=errors />
    <input type="hidden" id="id" name="id" value="${htmldoc.id}"/>
    <input type="hidden" id="action" name="action" value="modifyHtmlDoc"/>
    <input id="tag_remove" type="hidden" name="tag_remove" value="" ></input>

    <#include "/admin/util/editor/editor.html" />
    <@fieldInputText i18nLabelKey="blog.modify_htmldoc.labelContentLabel" inputName="content_label" mandatory=false value="${htmldoc.contentLabel}" i18nHelpBlockKey="htmldocs.modify_htmldoc.labelContentLabel.help" />

    <div class="form-group">
		<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="description">#i18n{blog.modify_htmldoc.labelDescription}&nbsp;&nbsp;:</label>
		<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
			 <textarea id="description" class="richtext" name="description" rows="">  ${htmldoc.description!}      </textarea> 
			<p class="help-block">#i18n{blog.modify_htmldoc.labelDescription.help} (help text)</p>
		</div>
    </div>
    <div class="form-group">
		<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="description">#i18n{blog.modify_htmldoc.labelHtmlContent}&nbsp;&nbsp;:</label>
		<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
    			<textarea id="html_content" class="richtext" name="html_content" rows="12">   ${htmldoc.htmlContent!}      </textarea>
			<p class="help-block">#i18n{blog.modify_htmldoc.labelHtmlContent.help} (help text)</p>
		</div>
    </div>
   



    <@initEditor/>
    <@fieldInputText i18nLabelKey="blog.modify_htmldoc.labelEditComment" inputName="edit_comment" mandatory=false value="${htmldoc.editComment}" i18nHelpBlockKey="blog.modify_htmldoc.labelEditComment.help" />

	<@fieldInputCheckBox i18nLabelKey="blog.create_htmldoc.labelShareable" inputName="shareable" value="true" disabled=false checked=htmldoc.shareable i18nHelpBlockKey='blog.create_htmldoc.labelShareable.help' cssClass='' />	
   <div class="form-group">
	<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="attachment">Piece jointe</label>
	<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
		<input name="attachment" id="attachment" type="file" value="servlet/plugins/blog/file?id_file=${htmldoc.id}">
		<a href="servlet/plugins/blog/file?id_file=${htmldoc.id}" title="preview"> <#if htmldoc.docContent ??>${htmldoc.docContent.textValue!}</#if></a>
	</div>
    </div>
    <div class="form-group">
	<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="attachment"></label>
	<div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
		   <input name="update_attachment" id="update_attachment" value="1" type="checkbox"> Supprimer la pi√®ce jointe
	</div>
    </div>
  
    
    <@actionButtons button1Name="action_modifyHtmlDoc" button2Name="view_manageHtmlDocs"/>
  </form>
  
  <div class="form-group" style="position: absolute; top: 0px; right: 0px;">
	        <div class="">	
		<label class=" control-label" for="description">Tag&nbsp;&nbsp;:</label>

  		<@comboWithParams name="tag_doc" default_value="" additionalParameters="class=\"input-xxlarge\"" items=list_tag />
		<button type="submit" value="addTag" name="addTag" class="btn btn-primary btn-sm btn-flat" onClick="addIdEntry()">
			<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;
		</button>

    		<p id="tag" class="help-block"></p>
		 <#list htmldoc.tag as tg>

				<div id="${tg.idTag}">
				${tg.name!}
				<button class="btn btn-primary btn-xs btn-flat"  title="Descendre" onClick="doUpdatePriorityTag(${tg.idTag}, 'moveDown' );">
									<i class="glyphicon glyphicon-arrow-down"></i>
				</button>
				<button class="btn btn-primary btn-xs btn-flat"  title="Monter" onClick="doUpdatePriorityTag(${tg.idTag}, 'moveUp');">
									<i class="glyphicon glyphicon-arrow-up"></i>
				</button>
				<button  type="submit" value="removeTag" name="removeTag" class="btn btn-danger btn-small" onClick="removeEntry(${tg.idTag}, '${tg.name!}');">
					<i class="fa fa-trash"></i>&nbsp;
	   			</button>
				</div>
			

		</#list>
	</div>
    </div>
</@rowBoxHeader>
