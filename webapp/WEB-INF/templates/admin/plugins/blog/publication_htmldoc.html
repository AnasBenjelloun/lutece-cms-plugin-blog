<@rowBoxHeader i18nTitleKey="blog.publication_htmldoc.title">
  
    ${htmldoc.contentLabel}

  <div class="box-tools pull-right">
 </div>

  <form class="form-horizontal" method="post" name="publication_htmldoc" enctype="multipart/form-data" action="jsp/admin/plugins/blog/ManagePublicationHtmlDocs.jsp">
    <@messages errors=errors />
    <input type="hidden" id="id" name="id" value="${htmldoc.id}"/>

  

	<div class="col-xs-12 col-sm-3 col-md-3 ">
	    <div class="box box-primary">
	    <div class="box-header"></div>
	    <div class="box-body">	 
			<div class="form-group">
				<label for="portlet_filter_value" class="sr-only"></label>
				<input type="text" name="portlet_filter_value" placeholder="#i18n{blog.manage_document_publishing.labelSearchBy}" class="form-control input-xs" value="<#if portlet_filter??>${portlet_filter.searchValue}</#if>">
				<label for="portlet_filter_type" class="sr-only">#i18n{blog.manage_document_publishing.labelSearchBy}</label>
				<select name="portlet_filter_type" id="portlet_filter_type" class="form-control input-xs">
					<option value="page_id" <#if portlet_filter??  && portlet_filter.portletFilterType  = "page_id"> selected="selected" </#if>>#i18n{blog.manage_document_publishing.labelSearchByIdPage}</option>
					<option value="page_name" <#if !portlet_filter?? ||portlet_filter.portletFilterType = "page_name">selected="selected"</#if>>#i18n{blog.manage_document_publishing.labelSearchByPageName}</option>
					<option value="portlet_name"<#if portlet_filter??  && portlet_filter.portletFilterType  = "portlet_name">selected="selected"</#if>>#i18n{blog.manage_document_publishing.labelSearchByPortletName}</option>
				</select>
			</div>
			<div class="form-group">
				<#if portlet_filter_error??><p class="label label-important">${portlet_filter_error}</p></#if>
				<label for="order_portlet" class="sr-only">#i18n{blog.manage_document_publishing.labelOrder}</label>
				<select name="order_portlet" class="form-control input-xs">
					<option value="0" <#if !order_portlet?? || order_portlet?? && order_portlet = 0> selected="selected" </#if> >#i18n{blog.manage_document_publishing.labelDateUpdatePortlet}</option>
					<option value="1" <#if order_portlet?? && order_portlet = 1> selected="selected" </#if> >#i18n{blog.manage_document_publishing.labelPageName}</option>
					<option value="2" <#if order_portlet?? && order_portlet = 2> selected="selected" </#if> >#i18n{blog.manage_document_publishing.labelPageId}</option>
					<option value="3" <#if order_portlet?? && order_portlet = 3> selected="selected" </#if> >#i18n{blog.manage_document_publishing.labelPortletName}</option>
				</select>
				
			</div>	
			<div class="form-group">	
				<label for="order_portlet_asc" class="sr-only"></label>
				<select name="order_portlet_asc" class="form-control input-xs">
					<option value="0" <#if !order_portlet_asc?? || order_portlet_asc?? && order_portlet_asc = 0> selected="selected" </#if> >#i18n{blog.manage_document_publishing.labelOrderDesc}</option>
					<option value="1" <#if order_portlet_asc?? && order_portlet_asc = 1> selected="selected" </#if>>#i18n{blog.manage_document_publishing.labelOrderAsc}</option>
				</select>
			</div>
			<div class="form-group">
				<button class="btn btn-primary btn-xs btn-flat" type="submit" title="#i18n{blog.manage_documents.buttonSearch}" name="view_manageHtmlDocsPublication">
					<i class="glyphicon glyphicon-search"></i> 
				</button>
				<#if !portlet_filter?? || portlet_filter.displayLatestPortlets>
					<input type="hidden" name="is_display_latest_portlets" value="false" >
				<#else>
					<button type="submit" class="btn btn-danger btn-xs" title="Supprimer le filtre" name="view_manageHtmlDocsPublication"> <i class="glyphicon glyphicon-remove"></i> </button>
					<input type="hidden" name="is_display_latest_portlets" value="true" >
				</#if>
			</div>
		</div>
	</div>
	</div>

	<div class="row">	
			<div class="col-xs-12 col-sm-6 col-md-6">	
				<div class="box box-primary">
					<div class="box-header">
						<h3 class="box-title">#i18n{blog.manage_document_publishing.labelAvailablePortlet} <#if !portlet_filter?? || portlet_filter.displayLatestPortlets>(${label_display_latest_portlets})</#if></h3>
					 </div>
					<div class="box-body">
					<#if document_list_portlet_list?size &gt; 0  || document_portlet_list?size &gt; 0 >

						<div class="row">
								<div class="col-sm-12 col-md-12">
									<ul class="nav nav-tabs" role="tablist">
										<li <#if !portlet_filter?? ||portlet_filter.displayLatestPortlets>class="active"</#if>>
											<a href="#document_list_portlet" role="tab" data-toggle="tab">
												#i18n{htmldocs.manage_document_publishing.labelAvailableDocumentListPortlet}
											</a>
										</li>
										<li <#if portlet_filter?? && !portlet_filter.displayLatestPortlets>class="active"</#if>> 
											<a href="#document_portlet" role="tab" data-toggle="tab">
												#i18n{htmldocs.manage_document_publishing.labelAvailableDocumentPortlet}
											</a>
										</li>
									</ul> 
									<div class="tab-content">
										<div class="tab-pane active" id="document_list_portlet">
											<#if document_list_portlet_list?size &gt; 0>
												<@comboWithParamsAndLength name="idPortlet" default_value="" additionalParameters="multiple='multiple'  size='10' class='form-control input-sm'" items=document_list_portlet_list max_length=175 />
											<#else>
												<p class="alert alert-danger">#i18n{htmldocs.manage_document_publishing.messagePortletNotExist}</p>
											</#if>
										</div>
										<div class="tab-pane" id="document_portlet">
											<#if document_portlet_list?size &gt; 0>
												<p class="lead">#i18n{document.manage_document_publishing.labelAvailableDocumentPortlet} <small>#i18n{blog.manage_document_publishing.labelAvailableDocumentPortletComment} </small></p>
												<@comboWithParamsAndLength name="idPortlet" default_value="" additionalParameters="multiple='multiple'  size='10' class='form-control input-sm'" items=document_portlet_list max_length=175 />
											<#else>
												<p class="alert alert-danger">#i18n{blog.manage_document_publishing.messagePortletNotExist}</p>
											</#if>
										</div>
									</div>
								</div>
						</div>					
					<#else>
						<br>
						<div class="alert alert-danger">
							<i class="fa fa-ban"></i>
							<b>#i18n{blog.manage_document_publishing.messagePortletNotExist}</b>
						</div>
					</#if>
				</div>
			</div>
		</div>

	<div class="form-group">
	
	<div class="col-xs-12 col-sm-12 col-md-9">
	<div class="input-daterange form-inline">
	        <label class="control-label col-xs-12 col-sm-12 col-md-3" for="dateBeginPublishing">date de publication</label>
		<div class="input-group">
			<input type="text" name="dateBeginPublishing" id="dateBeginPublishing" class="form-control input-sm " value="" >
			<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
		</div>

		<label class="" for="dateEndPublishing">date de fin publication</label>
		
		<div class="input-group">
		<input type="text" name="dateEndPublishing" id="dateEndPublishing" class="form-control input-sm " value="" >
				<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>
				<label for="dateEndPublishing" class="inline">#i18n{blog.createForm.labelDateEndDisponibility}</label>
					<span class="help-block">#i18n{blog.createForm.labelDateEndDisponibilityComment}</span>
			</div>
		</div>
	</div>



    <div class="form-group">
    <div class="col-xs-12 col-sm-offset-3 col-sm-8 col-md-offset-3 col-md-8">
			<button class="btn btn-primary" name="action_publishDocument" type="submit">
				<i class="fa fa-check"></i>&nbsp;OK
			</button>
				<button class="btn btn-default" name="view_manageHtmlDocs"  type="submit">
					<i class="fa fa-close"></i>&nbsp;Annuler
				</button>
    </div>
    </div>

  </form>

<@table>
      <thead>
       <tr>
	<th>Portlet</th>
	<th>Date de publication</th>
	<th>Date fin de publication</th>
        <th>#i18n{portal.util.labelActions}</th>
       </tr>
      </thead>
      <tbody>
          <#list htmldoc.htmldocPubilcation as pub>
        <tr>
          <td>
             <#list portlet_list as portlet>
			<#if portlet.id == pub.idPortlet > 
				<div>${portlet.name!}</div>
				  <#break>
			</#if>	
	     </#list>
          </td>
          <td>
            ${pub.dateBeginPublishing}
          </td>
          <td>
            ${pub.dateEndPublishing}
          </td>
          <td>
       
            <a  href="jsp/admin/plugins/blog/ManagePublicationHtmlDocs.jsp?action=unPublishDocument&idDocument=${htmldoc.id}&idPortlet=${pub.idPortlet}&id=${htmldoc.id}"
                class="btn btn-danger btn-sm" title="#i18n{portal.util.labelDelete}" >
              <i class="fa fa-trash"></i>
            </a>
            
          </td>
        </tr>
  
        </#list>
      </tbody>
      </@table>
</@rowBoxHeader>
 <@getDatePickerRangeBootstrap language="fr" />