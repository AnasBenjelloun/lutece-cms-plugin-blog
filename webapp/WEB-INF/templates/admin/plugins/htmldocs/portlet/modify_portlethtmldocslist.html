
Page:
<select id="page_template_code" name="page_template_code">
  <#list pages_list as key, value >
  
     <option value="${key}">${value}</option> 
  </#list>  
</select>

<title>Drag and drop</title>

<article>
  <p>Drag the list items over the dustbin, and drop them to have the bin eat the item</p>
  
  
 <div id="bin" class="target">
  <#list htmldoc_list_published as htmlDoc>
    <div ondragstart="return false;" ondrop="return false;">
		<div class="dismiss">x</div>
		<li id="${htmlDoc.id}"><a draggable="true" id="${htmlDoc.id}">${htmlDoc.contentLabel}</a></li>
	</div>
	
   </#list>
</div>

  <ul class="source" id ="source">
	<#list htmldoc_list as doc>
		<li id="${doc.id}"><a id="${doc.id}">${doc.contentLabel}</a></li>

	</#list>
  </ul>
</article>
  <script>

function addEvent(obj, eventName, callback){

	if (obj.addEventListener){

	    obj.addEventListener(eventName, callback, false);

	} else if (obj.attachEvent){

	     obj.attachEvent("on"+eventName, function(e){ return callback.call(obj, e); });

	}

}

var yum = document.createElement("li");
var msie = /*@cc_on!@*/0;
  //yum.style.opacity = 1;
var bin = document.querySelector('#bin');
var baseUrl = document.getElementsByTagName('base')[0].href;

$(".target").on("click", ".dismiss", function(event) {
  event.preventDefault();
  var parent= $(this).parent().children()[1];

  var val= parent.id;
  onclick=doDeleteDocument(val);
  $(".source").append("<li id="+val+"><a id="+val+" draggable='true' >"+parent.textContent+"</a></li>");
  $(this).parent().remove();
init();
  
});

function init(){
  var links = document.querySelectorAll('li > a'), el = null;
  for (var i = 0; i < links.length; i++) {
    el = links[i];
  
    el.setAttribute('draggable', 'true');
  
    addEvent(el, 'dragstart', function (e) {
      e.dataTransfer.effectAllowed = 'copy'; // only dropEffect='copy' will be dropable
      e.dataTransfer.setData('Text', this.id); // required otherwise doesn't work
    });
  }
}
init();


  addEvent(bin, 'dragover', function (e) {
    if (e.preventDefault) e.preventDefault(); // allows us to drop
    this.className = 'over';
    e.dataTransfer.dropEffect = 'copy';
    return false;
  });

  

  // to get IE to work
  addEvent(bin, 'dragenter', function (e) {
    this.className = 'over';
    return false;
  });

  addEvent(bin, 'dragleave', function () {
    this.className = '';
  });

  addEvent(bin, 'drop', function (e) {
   if (e.stopPropagation) e.stopPropagation(); // stops the browser from redirecting...why???

    var el = document.getElementById(e.dataTransfer.getData('Text'));
    el.parentNode.removeChild(el);
    bin.className = '';
    yum = document.createElement("div");
    yum.innerHTML += '<div class="dismiss" >x</a>';
    yum.appendChild(el);
    var y = yum.cloneNode(true);
    
    bin.appendChild(y);
    var orderDocument= bin.childNodes.length -1;
   setTimeout(function () {
      var t = setInterval(function () {
        if (y.style.opacity <= 0) {
          if (msie) { // don't bother with the animation
           y.style.display = 'none';
          }
          clearInterval(t); 
        } else {
          y.style.opacity -= 0.1;
        }
      }, 50);
	var idDocument= y.lastChild.id;
	doAddDocument(idDocument, orderDocument);
    }, 250);
   
   return false;
  });



function doAddDocument( idDocument,orderDocument)

{

	
	$.ajax({

            url : baseUrl + "jsp/admin/plugins/htmldocs/DoAddDocument.jsp?idDocument=" + idDocument+"&orderDocument="+orderDocument+"&action=add",

	    type: 'GET',

	    dataType: "json",

	    data: {},

            async: false,

	    cache:false,

            success:function(data) {

        	if ( data.status == 'OK' )

    		{
			//alert("success")
        	}

        	else
		{

			alert("echec")

		}

		},

          error: function(jqXHR, textStatus, errorThrown) {
		alert("error")
          }

	});

}
    
function doDeleteDocument( idDocument)

{

	
	$.ajax({

            url : baseUrl + "jsp/admin/plugins/htmldocs/DoAddDocument.jsp?idDocument=" + idDocument+"&action=remove",

	    type: 'GET',

	    dataType: "json",

	    data: {},

            async: false,

	    cache:false,

            success:function(data) {

        	if ( data.status == 'OK' )

    		{
			//alert("success")
        	}

        	else
		{

			alert("echec")

		}

		},

          error: function(jqXHR, textStatus, errorThrown) {
		alert("error")
          }

	});

}


  </script>

<style type="text/css">
li {
  list-style: none;
}

li a {
  text-decoration: none;
  color: #000;
  margin: 10px;
  width: 150px;
  border: 3px dashed #999;
  background: #eee;
  padding: 10px;
  display: block;
}

*[draggable=true] {
  -moz-user-select:none;
  -khtml-user-drag: element;
  cursor: move;
}

*:-khtml-drag {
  background-color: rgba(238,238,238, 0.5);
}

li a:hover:after {
  content: ' (drag me)';
}

ul {
  margin-left: 200px;
  min-height: 300px;
}

li.over {
  border-color: #333;
  background: #ccc;
}

#bin {
  background: url(images/bin.jpg) top right no-repeat;
  height: 250px;
  width: 166px;
  float: left;
  border: 5px solid #000;
  position: relative;
  margin-top: 0;
}

#bin.over {
  background: url(images/bin.jpg) top left no-repeat;
}

#bin p {
  font-weight: bold;
  text-align: center;
  position: absolute;
  bottom: 20px;
  width: 166px;
  font-size: 32px;
  color: #fff;
  text-shadow: #000 2px 2px 2px;
}

.dismiss {
  float: right;
  position: relative;
  top: -8px;
  line-height: 20px;
  font-size: 12px;
  font-weight: bold;
  text-decoration: none !important;
  color: #468847;
}
</style>